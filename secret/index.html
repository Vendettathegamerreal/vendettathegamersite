<!DOCTYPE html>
<meta name="robots" content="noindex">

<style>
body { margin: 0; overflow: hidden; }
.schnuffelner {
  width: 148px;
  height: fit-content;
  position: absolute;
  left:50%;
  top:50%;
  transform: translate(-50%, -50%);
}
* { user-select: none; }

.text {
  width: 100vw;
  left: 50%;
  transform: translate(-50%);
  height: 70%;
  background-image: url('text.png');
  background-size: 100% 100%;
  position: absolute;
  z-index: 4;
  filter: invert(1);
  mix-blend-mode: exclusion;
}

#text, #schnuffelienchen, #overlay { display: none; }

@keyframes flash {
  0% { backdrop-filter: invert(1); }
  50% { backdrop-filter: invert(0); }
}

#schnuffelienchen {
  position: absolute;
  left: 50%;
  bottom: 50%;
  transform: translate(-50%, 10%) rotate(11deg);
}

@keyframes Schnuffelienchen {
  0%   { transform: translate(-50%, 10%) rotate(21deg); bottom: 50% }
  10%  { transform: translate(-50%) rotate(22deg); bottom: 48% }
  30%  { transform: translate(-50%) rotate(9deg);  bottom: 38% }
  50%  { transform: translate(-51%) rotate(-9deg); bottom: 8% }
  57%  { transform: translate(-48%) rotate(2deg);  bottom: 0% }
  70%  { transform: translate(-51%) rotate(-1deg); bottom: 1.18% }
  95%  { transform: translate(-50%) rotate(0.4deg);bottom: 0.333% }
  100% { transform: translate(-50%) rotate(0deg);  bottom: 0.5% }
}

#overlay {
  animation: flash 512ms steps(1) infinite;
  position: absolute;
  width: 100vw;
  height: 100vh;
  z-index: 4;
  pointer-events: none;
}

/* Epilepsy warning overlay */
#warnOverlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  background: #000;
  color: #fff;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  z-index: 9999;
  font-family: sans-serif;
  text-align: center;
  padding: 2rem;
}
#warnOverlay button {
  margin-top: 2rem;
  padding: 1rem 2rem;
  font-size: 1.2rem;
  cursor: pointer;
}
</style>

<div id="warnOverlay">
  <h1>Epilepsy Warning</h1>
  <p>READ THIS NOTICE BEFORE STARTING. This easter egg contains flashing lights that may trigger seizures in some people.</p>
  <p>Please do not continue if you are sensitive to flashing content.</p>
  <button id="acceptWarning">I Understand</button>
</div>

<div class="schnuffelner">
  <img id="schnuffelpic" draggable="false" style="cursor:pointer">
</div>

<img src="Schnuffelienchenrender.webp"
     id="schnuffelienchen"
     style="animation: Schnuffelienchen 512ms linear forwards; display:none">

<div class="text" id="text" style="display:none"></div>

<div id="bg" style="z-index:-1;position:absolute;width:100vw;height:100vh;"></div>

<script>
// Wait for the user to accept the epilepsy warning
document.getElementById("acceptWarning").addEventListener("click", ()=>{
  document.getElementById("warnOverlay").style.display = "none";

  // Now initialize the rest
  APT();
  float();
  schnuffelize();
  navigator.clipboard.writeText("Click the Schnuffel").catch(()=>{});
});

// Audio objects
const chord = new Audio("chord.ogg");
const critical = new Audio("Critical.ogg");
const amb = new Audio("nothing.opus");
amb.loop = true;

// Title animation
function APT(){
  let e="CLICK THE schnuffel", t="", a=0;
  setInterval(()=>{
    let c=e.charAt(a);
    c=Math.random()>.5?c.toUpperCase():c.toLowerCase();
    t=e.slice(0,a)+c+e.slice(a+1);
    document.title=t;
    if(++a>=e.length) a=0;
  },0);
}

// Preload images
function float(){
  let imgs=[
    "Schnuffel.png","Schnuffel.png","Schnuffel.png",
    "Schnuffel.png","Schnuffel.png","Schnuffel.png",
    "Schnuffelienchenrender.webp","Schnuffelienchenrender.webp","Schnuffelienchenrender.webp"
  ];
  let loaded=0, cache=[];
  imgs.forEach(src=>{
    let i=new Image();
    i.onload=()=>{
      loaded++;
      cache.push(i);
      if(loaded===imgs.length) loadf();
    };
    i.src=src;
  });
}

// Mousemove triggers
function loadf(){
  document.getElementById("bg").addEventListener("mousemove", e=>{
    let x=e.clientX, y=e.clientY, w=innerWidth, h=innerHeight;
    if(
      (x<=130 && y<=130) ||
      (x>=w-120 && y<=120) ||
      (x<=10 || x>=w || y<=10 || y>=h)
    ){
      critical.play().catch(()=>{});
      alert("Click the schnuffel");
      chord.play().catch(()=>{});
    }
  });
}

// Schnuffel click sequence
function schnuffelize(){
  const amb2 = new Audio("/nothing.opus"); 
  amb2.loop = true;
  const loop = new Audio("tts.opus"); 
  loop.loop = true;

  const schnuffelpic = document.getElementById("schnuffelpic");
  const schnuffelienchen = document.getElementById("schnuffelienchen");
  const text = document.getElementById("text");
  const overlay = document.getElementById("overlay");
  const bg = document.getElementById("bg");

  schnuffelpic.src = "Schnuffel.png";

  // Click triggers full sequence
  schnuffelpic.addEventListener("click", ()=>{
    schnuffelpic.style.display = "none";

    schnuffelienchen.style.display = "block";
    bg.style.display = "none";

    setTimeout(()=>schnuffelienchen.src="Schnuffelienchenrender.webp",90);
    setTimeout(()=>schnuffelienchen.src="Schnuffelienchenrender.webp",310);

    setTimeout(()=>{
      text.style.display="block";
      overlay.style.display="block";
      amb.play().catch(()=>{}); // background music plays after click
    },1024);

    setTimeout(()=>location.href="/",3765);
  });
}
</script>


